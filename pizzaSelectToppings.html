<!doctype html>
<head>
  <meta charset="utf-8">

  <title>pizza share</title>
  <meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script src="//www.parsecdn.com/js/parse-1.6.7.min.js"></script>
  <script src="main.js"></script
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

   <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom styles for this template -->
    <link href="css/cover.css" rel="stylesheet">
        <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
</head>

<body>
  
  <div id="main">
    <h1 id="test">welcome to pizza share</h1>

    <p>Fill out the form to create a pizza</p>


    <div style="display:none" class="error">
      Looks like there was a problem saving the test object. Make sure you've set your application ID and javascript key correctly in the call to <code>Parse.initialize</code> in this file.
    </div>

    <div style="display:none" class="success">
      <p>We've also just created your first object using the following code:</p>
      
        <code>
          var TestObject = Parse.Object.extend("TestObject");<br/>
          var testObject = new TestObject();<br/>
          testObject.save({foo: "bar"});
        </code>
    </div>
  </div>

  <div style="display:none" class="access__container cf" id="accessContainer">
          <!-- signin signup form -->
          <form class="access__form cf" id="actionForm">
            <input type="text" class="action__input" placeholder="Username" id="usernameField">
            <input type="password" class="action__input" placeholder="Password" id="passwordField">
          </form>
          <!-- signup button -->
          <button class="access__button" id="signUpBtn">Not signed up yet?</button>

  </div>

  <div id="pizzaContainer">
    <form id="actionForm2">
      <input type="text" placeHolder="Location" id="locationField">
      <br>
      <input type="text" placeHolder="Full Name" id="creatorField">
      <br>
      <input type="text" placeHolder="Email (kept private)" id="emailField">
      <br>
      <input type="text" placeHolder="Topping 1" id="toppingsField">
      <input type="text" placeHolder="Topping 2" id="toppings2Field">
      <input type="text" placeHolder="Topping 3" id="toppings3Field">
    </form>
    <br>
    <button id="createBtn">Create your pizza!</button>
  </div>


<script type="text/javascript">
Parse.initialize("7KqL30AZciYFanvE29SVJMJBUEJu4yTBpjFLhMrf", "o3sqlOBTBjSZsvfHxJexP7Zf58oDEv82Z1TxKFb9");
  {
  
  //grab the toppings from the table
  var ToppingsTable = Parse.Object.extend("toppings");
  var toppingsQuery = new Parse.Query(ToppingsTable);
  var toppingsArray = new Object(); //stores topping name and status
  var availToppings = []; //stores valid toppings and whether they are selected

  toppingsQuery.ascending("toppingName");
  toppingsQuery.find({
    success: function(results){
      for (var i = 0; i<results.length; i++)
      {
        var object = results[i];
        //alert(object.id + " " + object.get('toppingName'));
        toppingsArray[object.get('toppingName')] = 0;
        //alert(toppingsArray[object.get('toppingName')]);
      }
    }
  })

  var PizzaTable = Parse.Object.extend("pizza");
  var openPizzaQuery = new Parse.Query(PizzaTable);
  openPizzaQuery.equalTo("Completed", false);
  openPizzaQuery.find({

    success: function(results){
      alert("SUCCESS");
      for (var i = 0; i< results.length; i++)
      {
        
        var object = results[i]
        //alert(object.id + " " + object.get('topping1'));
        toppingsArray[object.get('topping1')] = 1;
        //alert(toppingsArray[object.get('topping1')]);
      }
    },
    error: function(error)
    {
      alert(error.code);
    }
  })
  
  alert(toppingsArray['Mushrooms']);
  
  /*Object.keys(toppingsArray).forEach(function(key)
  {
    console.log(this[key]);
    alert(key);
  });*/
  for (var index in toppingsArray)
  {
    if (toppingsArray.hasOwnProperty(index)) //check if key exists
      {
        if (toppingsArray[index]===1)
        {
          availToppings.push(index);
        }
      }
  }
}

        /*function load(){
          //code here
          ParseQuery query = new ParseQuery("pizza");
          query.whereEqualTo("Completed", false);
          query.findInBackground(new FindCallback() {

            @override
            public void done(List<ParseObject> objects, ParseExcception e) {
                if (e == null) {
                  document.getElementById("list").innerHTML = ".";
                  for (ParseObject pizzaObject : objects) {
                    document.getElementById("list").innerHTML = ".";
                  } else {
                    document.getElementById("list").innerHTML = "_";
                  }
                }
            }
          });*/
          /*
          var Pizza = Parse.Object.extend("pizzas");
          var queryObject = new Parse.Query(Pizza);

          queryObject.find({
            success: function(results){
              for (var i = 0; i < results.length; i++) {
                document.getElementById("list").innerHTML = ".";
              }
            },
            error: function (error) {
              alert("error: " + error.code + " " + error.message);
            }
          });
          */
        


  </script>
</body>

</html>
